This document was generated by AI (OpenAI Codex CLI assistant).

API Testing Quick Reference
---------------------------
Base URL: http://localhost:8080

Auth
- All requests require the X-API-KEY header.
- Default dev key: dev-local-key.
- Static files under /uploads/** are public and do not require the API key.

Projects
- GET /api/projects
- GET /api/projects/{id}
- GET /api/projects/adr/{address}
- GET /api/projects/name/{name}
- GET /api/projects/contractor/{contractorId}
- GET /api/projects/timeline/{id} (Project ID)
- GET /api/projects/{id}/finished (returns only { "finished": true|false })
- Project responses include latitude/longitude (nullable).
- Project responses include a finished flag (boolean).
- Latitude/longitude are optional in POST and PATCH bodies; omit to keep current coordinates.
- Request field aliases are accepted:
  - contractor or contractorId
  - number_of_workers, numberOfWorkers, or workers
  - eta or ETA
- Validation rules (400 on invalid):
  - budget >= 0, workers >= 0, eta >= 0, progress between 0 and 100
  - latitude between -90 and 90, longitude between -180 and 180
- POST /api/projects
  Body:
  {
    "name": "Home Renovation #2",
    "budget": 75000,
    "contractor": "CONTRACTOR_ID_HERE",
    "address": "123 Main Street",
    "latitude": 41.9982,
    "longitude": 21.4254,
    "progress": 0,
    "finished": false,
    "number_of_workers": 20,
    "taskIds": [],
    "eta": 4
  }
- taskIds and imageIds are ignored on create
- DELETE /api/projects/{id} (deletes project, tasks, and images, 404 if project not found)
- PATCH /api/projects/{id}/contractor
  Body: { "contractorId": "NEW_CONTRACTOR_ID", "latitude": 41.9982, "longitude": 21.4254 }
  (contractor is also accepted in place of contractorId)
- PATCH /api/projects/{id}/contractor/remove
- PATCH /api/projects/{id}/address
  Body: { "address": "456 Updated Avenue", "latitude": 41.9982, "longitude": 21.4254 }
- PATCH /api/projects/{id}/name
  Body: { "name": "Updated Project Name", "latitude": 41.9982, "longitude": 21.4254 }
- PATCH /api/projects/{id}/budget
  Body: { "budget": 82000, "latitude": 41.9982, "longitude": 21.4254 }
- PATCH /api/projects/{id}/workers
  Body: { "workers": 18, "latitude": 41.9982, "longitude": 21.4254 }
  (number_of_workers or numberOfWorkers are also accepted in place of workers)
- PATCH /api/projects/{id}/progress
  Body: { "progress": 65, "latitude": 41.9982, "longitude": 21.4254 }
- PATCH /api/projects/{id}/finished
  Body: { "finished": true }
- PATCH /api/projects/{id}/eta
  Body: { "eta": 3, "latitude": 41.9982, "longitude": 21.4254 }
  (ETA is also accepted in place of eta)
- POST /api/projects/{projectId}/tasks
  Body:
  {
    "name": "Install wiring",
    "status": "NOT_STARTED"
  }
- DELETE /api/projects/{projectId}/tasks/{taskId}
  - 400 if the task does not belong to the project

Images
- GET /api/images
- GET /api/images/{id}
- GET /api/images/project/{projectId}
- POST /api/images
  Body:
  {
    "projectId": "PROJECT_ID_HERE",
    "url": "https://example.com/image.jpg",
    "description": "Front elevation",
    "uploadedBy": "jane.builder"
  }
- POST /api/images/upload (multipart/form-data)
  Fields:
  - projectId (text, required)
  - file (file, required)
  - description (text, optional)
  - uploadedBy (text, optional)
  Notes:
  - Uploads must be valid image files; spoofed content types return 400.
  - Max 50 images per project; additional uploads return 400.
  Example curl:
  curl -X POST http://localhost:8080/api/images/upload \
    -H "X-API-KEY: dev-local-key" \
    -F "projectId=PROJECT_ID_HERE" \
    -F "file=@./path/to/image.jpg" \
    -F "description=Front elevation" \
    -F "uploadedBy=jane.builder"
  The returned url can be opened directly (http://localhost:8080/uploads/<filename>).
- PUT /api/images/{id}
  Body:
  {
    "projectId": "PROJECT_ID_HERE",
    "url": "https://example.com/image.jpg",
    "description": "Updated description",
    "uploadedBy": "jane.builder"
  }
- DELETE /api/images/{id}

Contractors
- GET /api/contractors
- GET /api/contractors/{id}
- GET /api/contractors/search/{name}
- GET /api/contractors/expertise/{level}
- GET /api/contractors/expertise (lists enum values)
- Validation rules (400 on invalid):
  - fullName is required and non-blank
  - price must be >= 0
  - expertise is required
- POST /api/contractors
  Body:
  {
    "fullName": "Jane Builder",
    "price": 950,
    "expertise": "SENIOR"
  }
- PUT /api/contractors/{id}
  Body:
  {
    "id": "SAME_AS_PATH",
    "fullName": "Jane Builder",
    "price": 1000,
    "expertise": "SENIOR"
  }
- DELETE /api/contractors/{id}
  - Clears contractorId on projects that referenced the contractor

Tasks
- GET /api/tasks
- GET /api/tasks/{id}
- GET /api/tasks/project/{projectId}
- GET /api/tasks/statuses (lists enum values)
- projectId is required for task create/update. Tasks always belong to a project.
- Creating/updating/deleting tasks updates Project.taskIds to stay in sync.
- POST /api/tasks
  Body:
  {
    "name": "Pour concrete",
    "projectId": "PROJECT_ID_HERE",
    "status": "NOT_STARTED"
  }
- POST /api/tasks returns 400 if projectId is missing, 404 if projectId does not exist.
- PUT /api/tasks/{id}
  Body:
  {
    "id": "SAME_AS_PATH",
    "name": "Pour concrete foundation",
    "projectId": "PROJECT_ID_HERE",
    "status": "WORKING"
  }
- PUT /api/tasks/{id} can move a task to a different projectId.
- PUT /api/tasks/{id} returns 400 if projectId is missing, 404 if task or project does not exist.
- DELETE /api/tasks/{id} (204 on success, 404 if not found)

Usage Tips
- In Postman choose the HTTP method, set the URL, switch Body to raw JSON for POST/PUT/PATCH, paste the template, then send.
- Replace placeholder IDs (PROJECT_ID_HERE, CONTRACTOR_ID_HERE, etc.) with actual values returned by the API.
